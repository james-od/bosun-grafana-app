{"version":3,"sources":["../../src/datasource/datasource.js"],"names":["TableModel","moment","BosunDatasource","instanceSettings","$q","backendSrv","templateSrv","$sce","$rootScope","annotateUrl","jsonData","openTSDBUrl","type","url","name","showHelper","enableQueryHelper","preRelease","enablePreReleaseFeatures","authToken","q","sce","IncidentListQuery","bind","result","table","Object","keys","length","tagKeys","_","each","Group","v","tagKey","push","sort","columns","map","res","row","tagValue","indexOf","Value","rows","target","options","tagData","k","sortedTags","sortBy","metricLabel","alias","scopedVars","clone","value","key","replace","tag","join","dps","parseInt","datapoints","query","exprDate","range","to","utc","format","exprTime","encodeURIComponent","bosunRequest","method","data","datasource","then","response","status","Type","Results","config","transformMetricData","makeTable","Columns","column","Rows","metricRoot","filtered","filter","startsWith","metric","findTransform","text","metricsRegex","tagKeysRegex","tagValuesRegex","metricsQuery","match","_metricsStartWith","tagKeysQuery","_tagKeysForMetric","tagValuesQuery","_tagValuesForMetricAndTagKey","trim","when","queries","secondsAgo","diff","from","targets","expr","hide","interval","isEmpty","d","defer","resolve","promise","allQueryPromise","index","performTimeSeriesQuery","all","allResponse","annotation","fieldName","fieldObject","params","param","empty","not","variables","pad","num","size","s","StartDate","unix","EndDate","_processAnnotationQueryParam","Source","Host","CreationUser","Owner","Category","Url","jQuery","rawUrl","events","a","duration","hours","minutes","seconds","substring","Message","Id","grafanaAnnotation","time","title","headers","includes","message","angular","fromJson","self","interpolatedQuery","transformResponse","_plainTextResponseTransform","error","appEvent","alertKey","trustAsHtml","Body","actionObj","datasourceRequest"],"mappings":"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","sourcesContent":["import TableModel from 'app/core/table_model';\nimport moment from 'moment';\n\nexport class BosunDatasource {\n    constructor(instanceSettings, $q, backendSrv, templateSrv, $sce, $rootScope) {\n        this.annotateUrl = instanceSettings.jsonData.annotateUrl;\n        this.openTSDBUrl  = instanceSettings.jsonData.openTSDBUrl;\n        this.type = instanceSettings.type;\n        this.url = instanceSettings.url;\n        this.name = instanceSettings.name;\n        this.showHelper = instanceSettings.jsonData.enableQueryHelper;\n        this.preRelease = instanceSettings.jsonData.enablePreReleaseFeatures;\n        this.authToken = instanceSettings.jsonData.authToken;\n        this.q = $q;\n        this.backendSrv = backendSrv;\n        this.templateSrv = templateSrv;\n        this.sce = $sce;\n        this.$rootScope = $rootScope;\n        this.IncidentListQuery = this.IncidentListQuery.bind(this);\n    }\n\n    makeTable(result) {\n        var table = new TableModel();\n        if (!result || Object.keys(result).length < 1) {\n            return [table];\n        }\n        var tagKeys = [];\n        _.each(result[0].Group, function (v, tagKey) {\n            tagKeys.push(tagKey);\n        });\n        tagKeys.sort();\n        table.columns = _.map(tagKeys, function (tagKey) {\n            return { \"text\": tagKey };\n        });\n        table.columns.push({ \"text\": \"value\" });\n        _.each(result, function (res) {\n            var row = [];\n            _.each(res.Group, function (tagValue, tagKey) {\n                row[tagKeys.indexOf(tagKey)] = tagValue;\n            });\n            row.push(res.Value);\n            table.rows.push(row);\n        });\n        return [table];\n    }\n\n    transformMetricData(result, target, options) {\n        var tagData = [];\n        _.each(result.Group, function (v, k) {\n            tagData.push({ 'value': v, 'key': k });\n        });\n        var sortedTags = _.sortBy(tagData, 'key');\n        var metricLabel = \"\";\n        if (target.alias) {\n            var scopedVars = _.clone(options.scopedVars || {});\n            _.each(sortedTags, function (value) {\n                scopedVars['tag_' + value.key] = { \"value\": value.value };\n            });\n            metricLabel = this.templateSrv.replace(target.alias, scopedVars);\n        } else {\n            tagData = [];\n            _.each(sortedTags, function (tag) {\n                tagData.push(tag.key + '=' + tag.value);\n            });\n            metricLabel = '{' + tagData.join(', ') + '}';\n        }\n        var dps = [];\n        _.each(result.Value, function (v, k) {\n            dps.push([v, parseInt(k) * 1000]);\n        });\n        return { target: metricLabel, datapoints: dps };\n    }\n\n    performTimeSeriesQuery(query, target, options) {\n        var exprDate = options.range.to.utc().format('YYYY-MM-DD');\n        var exprTime = options.range.to.utc().format('HH:mm:ss');\n        var url = this.url + '/api/expr?date=' + encodeURIComponent(exprDate) + '&time=' + encodeURIComponent(exprTime);\n        return this.bosunRequest({\n            url: url,\n            method: 'POST',\n            data: query,\n            datasource: this\n        }).then(response => {\n            if (response.status === 200) {\n                var result;\n                if (response.data.Type === 'series') {\n                    result = _.map(response.data.Results, function (result) {\n                        return response.config.datasource.transformMetricData(result, target, options);\n                    });\n                }\n                if (response.data.Type === 'number') {\n                    result = response.config.datasource.makeTable(response.data.Results);\n                }\n                if (response.data.Type === 'table') {\n                    var table = new TableModel();\n                    table.columns = _.map(response.data.Results[0].Value.Columns, function (column) {\n                        return { \"text\": column };\n                    });\n                    table.rows = response.data.Results[0].Value.Rows;\n                    result = [table];\n                }\n                return { data: result };\n            }\n        });\n    }\n\n    _metricsStartWith(metricRoot) {\n        return this.bosunRequest({\n            url: this.url + \"/api/metric\",\n            method: 'GET',\n            datasource: this\n        }).then((data) => {\n            var filtered = _.filter(data.data, (v) => {\n                return v.startsWith(metricRoot);\n            });\n            return filtered;\n        });\n    }\n\n    _tagKeysForMetric(metric) {\n        return this.bosunRequest({\n            url: this.url + \"/api/tagk/\" + metric,\n            method: 'GET',\n            datasource: this\n        }).then((data) => {\n            return data.data;\n        });\n    }\n\n    _tagValuesForMetricAndTagKey(metric, key) {\n        return this.bosunRequest({\n            url: this.url + \"/api/tagv/\" + key + \"/\" + metric,\n            method: 'GET',\n            datasource: this\n        }).then((data) => {\n            return data.data;\n        });\n    }\n\n    _metricMetadata(metric) {\n        return this.bosunRequest({\n            url: this.url + \"/api/metadata/metrics?metric=\" + metric,\n            method: 'GET',\n            datasource: this\n        }).then((data) => {\n            return data.data;\n        });\n    }\n\n    metricFindQuery(query) {\n        var findTransform = function (result) {\n            return _.map(result, function (value) {\n                return { text: value };\n            });\n        };\n        // Get Metrics that start with the first argument\n        var metricsRegex = /metrics\\((.*)\\)/;\n        // Get tag keys for the given metric (first argument)\n        var tagKeysRegex = /tagkeys\\((.*)\\)/;\n        // Get tag values for the given metric (first argument) and tag key (second argument)\n        var tagValuesRegex = /tagvalues\\((.*),(.*)\\)/;\n\n        var metricsQuery = query.match(metricsRegex)\n        if (metricsQuery) {\n            return this._metricsStartWith(metricsQuery[1]).then(findTransform);\n        }\n\n        var tagKeysQuery = query.match(tagKeysRegex)\n        if (tagKeysQuery) {\n            return this._tagKeysForMetric(tagKeysQuery[1]).then(findTransform);\n        }\n\n        var tagValuesQuery = query.match(tagValuesRegex)\n        if (tagValuesQuery) {\n            return this._tagValuesForMetricAndTagKey(tagValuesQuery[1].trim(), tagValuesQuery[2].trim()).then(findTransform);\n        }\n\n        return this.q.when([]);\n    }\n\n    query(options) {\n        var queries = [];\n        // Get time values to replace $start\n        // The end time is what bosun regards as 'now'\n        var secondsAgo = options.range.to.diff(options.range.from.utc(), 'seconds');\n        secondsAgo += 's';\n        _.each(options.targets, _.bind(function (target) {\n            if (!target.expr || target.hide) {\n                return;\n            }\n            var query = {};\n\n            query = this.templateSrv.replace(target.expr, options.scopedVars, 'pipe');\n            query = query.replace(/\\$start/g, secondsAgo);\n            query = query.replace(/\\$ds/g, options.interval);\n            queries.push(query);\n        }, this));\n\n        // No valid targets, return the empty result to save a round trip.\n        if (_.isEmpty(queries)) {\n            var d = this.q.defer();\n            d.resolve({ data: [] });\n            return d.promise;\n        }\n\n        var allQueryPromise = _.map(queries, _.bind(function (query, index) {\n            return this.performTimeSeriesQuery(query, options.targets[index], options);\n        }, this));\n\n        return this.q.all(allQueryPromise)\n            .then(function (allResponse) {\n                var result = [];\n                _.each(allResponse, function (response) {\n                    _.each(response.data, function (d) {\n                        result.push(d);\n                    });\n                });\n                return { data: result };\n            });\n    }\n\n    _processAnnotationQueryParam(annotation, fieldName, fieldObject, params) {\n        var param = {};\n        var key = fieldName;\n        if (!fieldObject) {\n            return params;\n        }\n        if (fieldObject.empty) {\n            key += \":Empty\"\n        }\n        if (fieldObject.not) {\n            if (!fieldObject.empty) {\n                key += \":\"\n            }\n            key += \":Empty\"\n        }\n        params[key] = this.templateSrv.replace(fieldObject.value, this.templateSrv.variables, 'pipe');\n        return params\n    }\n\n\n    annotationQuery(options) {\n        // http://stackoverflow.com/questions/2998784/how-to-output-integers-with-leading-zeros-in-javascript\n        var pad = (num, size) => {\n            var s = num + \"\";\n            while (s.length < size) s = \"0\" + s;\n            return s;\n        }\n        var annotation = options.annotation;\n        var params = {};\n        params.StartDate = options.range.from.unix();\n        params.EndDate = options.range.to.unix();\n        var annotateUrl = this.annotateUrl;\n        params = this._processAnnotationQueryParam(annotation, \"Source\", annotation.Source, params)\n        params = this._processAnnotationQueryParam(annotation, \"Host\", annotation.Host, params)\n        params = this._processAnnotationQueryParam(annotation, \"CreationUser\", annotation.CreationUser, params)\n        params = this._processAnnotationQueryParam(annotation, \"Owner\", annotation.Owner, params)\n        params = this._processAnnotationQueryParam(annotation, \"Category\", annotation.Category, params)\n        params = this._processAnnotationQueryParam(annotation, \"Url\", annotation.Url, params)\n        var url = this.url + '/api/annotation/query?';\n        if (Object.keys(params).length > 0) {\n            url += jQuery.param(params);\n        }\n        var rawUrl = this.rawUrl;\n        return this.bosunRequest({\n            url: url,\n            method: 'GET',\n            datasource: this\n        }).then(response => {\n            if (response.status === 200) {\n                var events = [];\n                _.each(response.data, (a) => {\n                    var text = [];\n                    var duration = moment.duration(moment(a.EndDate).diff(a.StartDate));\n                    var hours = duration.hours();\n                    var minutes = duration.minutes();\n                    var seconds = duration.seconds();\n                    text.push(\"Duration: \" + pad(hours, 3) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2));\n                    if (a.Source) {\n                        text.push(\"Source: \" + a.Source);\n                    }\n                    if (a.Host) {\n                        text.push(\"Host: \" + a.Host);\n                    }\n                    if (a.CreationUser) {\n                        text.push(\"User: \" + a.CreationUser);\n                    }\n                    if (a.Owner) {\n                        text.push(\"Owner: \" + a.Owner);\n                    }\n                    if (a.Category) {\n                        text.push(\"Category: \" + a.Category);\n                    }\n                    if (a.Url) {\n                        text.push('<a href=\"' + a.Url + '\">' + a.Url.substring(0, 40) + '</a>');\n                    }\n                    if (a.Message) {\n                        text.push(a.Message);\n                    }\n                    text.push('<a target=\"_blank\" href=\"' + annotateUrl + '/annotation?id=' + encodeURIComponent(a.Id) + '\">Edit in Bosun UI</a>')\n                    var grafanaAnnotation = {\n                        annotation: annotation,\n                        time: moment(a.StartDate).utc().unix() * 1000,\n                        title: a.Category,\n                        text: text.join(\"<br>\")\n                    }\n                    events.push(grafanaAnnotation);\n                });\n                return events;\n            }\n        });\n    }\n\n    // Since the API response is not JSON, we need a transform interceptor to\n    // handle a text response. Otherwise we just get i.e. 'Internal Server Error'\n    _plainTextResponseTransform(data, headers) {\n        if (headers(\"content-type\").includes(\"text/plain\")) {\n            return { message: data };\n        }\n        return angular.fromJson(data);\n    }\n\n    IncidentListQuery(query) {\n        var self = this;\n        var url = this.url + '/api/incidents/open';\n        if (query) {\n            var interpolatedQuery = this.templateSrv.replace(query, this.templateSrv.variables, 'pipe');\n            url += '?filter=' + encodeURIComponent(interpolatedQuery)\n        }\n        return this.bosunRequest({\n            url: url,\n            method: 'GET',\n            transformResponse: this._plainTextResponseTransform\n        }).then(response => {\n            if (response.status === 200) {\n                return response.data;\n            }\n        }, (error) => {\n            self.$rootScope.appEvent('alert-error', ['IncidentListQuery Error', error.data.message]);\n        })\n    }\n\n    AlertBodyHTML(alertKey) {\n        return this.bosunRequest({\n            url: this.url + '/api/status?ak=' + encodeURIComponent(alertKey),\n            method: 'GET'\n        }).then(response => {\n            if (response.status === 200) {\n                return this.sce.trustAsHtml(response.data[alertKey].Body);\n            }\n        })\n    }\n\n    submitAction(actionObj) {\n        var self = this;\n        return this.bosunRequest({\n            url: this.url + '/api/action',\n            method: 'POST',\n            data: actionObj,\n            datasource: this\n        }).then((data) => {\n            debugger;\n            self.$rootScope.appEvent('alert-success', ['Incident Action Succeeded', ''])\n        }, (error) => {\n            debugger;\n            self.$rootScope.appEvent('alert-error', ['Incident Action Error', error]);\n        })\n    }\n\n\n    bosunRequest(data) {\n        if (this.authToken) {\n            data.headers = {\n                \"X-Access-Token\": this.authToken\n            };\n        }\n        return this.backendSrv.datasourceRequest(data);\n    }\n\n    // Required\n    // Used for testing datasource in datasource configuration pange\n    testDatasource() {\n        return this.bosunRequest({\n            url: this.url + '/',\n            method: 'GET',\n        }).then(response => {\n            if (response.status === 200) {\n                return { status: \"success\", message: \"Data source is working\", title: \"Success\" };\n            }\n        });\n    }\n}\n\n\n"],"file":"datasource.js"}