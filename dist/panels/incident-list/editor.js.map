{"version":3,"sources":["../../../src/panels/incident-list/editor.js"],"names":["bosunIncidentListPanelEditor","restrict","scope","templateUrl","controller","BosunIncidentListPanelEditorCtrl","$scope","$rootScope","$q","uiSegmentSrv","datasourceSrv","templateSrv","editor","panelCtrl","ctrl","panel","self","datasources","_","filter","getMetricSources","datasource","meta","id","map","get","then","refresh","showMutli"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BO,WAASA,4BAAT,GAAwC;AAC3C,WAAO;AACHC,MAAAA,QAAQ,EAAE,GADP;AAEHC,MAAAA,KAAK,EAAE,IAFJ;AAGHC,MAAAA,WAAW,EAAE,2DAHV;AAIHC,MAAAA,UAAU,EAAEC;AAJT,KAAP;AAMH;;0CAPeL,4B;;;;;AA5BVK,MAAAA,gC;AACF,kDAAYC,MAAZ,EAAoBC,UAApB,EAAgCC,EAAhC,EAAoCC,YAApC,EAAkDC,aAAlD,EAAiEC,WAAjE,EAA8E;AAAA;;AAC1EL,UAAAA,MAAM,CAACM,MAAP,GAAgB,IAAhB;AACA,eAAKC,SAAL,GAAiBP,MAAM,CAACQ,IAAxB;AACA,eAAKC,KAAL,GAAa,KAAKF,SAAL,CAAeE,KAA5B;AACA,eAAKP,EAAL,GAAUA,EAAV;AACA,cAAIQ,IAAI,GAAG,IAAX;AACA,eAAKN,aAAL,GAAqBA,aAArB;;AACA,cAAIO,WAAW,GAAGC,CAAC,CAACC,MAAF,CAAS,KAAKT,aAAL,CAAmBU,gBAAnB,EAAT,EAAgD,UAAAC,UAAU,EAAI;AAC5E,mBAAOA,UAAU,CAACC,IAAX,CAAgBC,EAAhB,KAAuB,kBAA9B;AACH,WAFiB,CAAlB;;AAGA,eAAKN,WAAL,GAAmBC,CAAC,CAACM,GAAF,CAAMP,WAAN,EAAmB,MAAnB,CAAnB;;AACA,cAAI,CAAC,KAAKF,KAAL,CAAWM,UAAhB,EAA4B;AACxB,iBAAKN,KAAL,CAAWM,UAAX,GAAwB,KAAKJ,WAAL,CAAiB,CAAjB,CAAxB;AACH;;AACD,eAAKP,aAAL,CAAmBe,GAAnB,CAAuB,KAAKV,KAAL,CAAWM,UAAlC,EAA8CK,IAA9C,CAAmD,UAAUL,UAAV,EAAsB;AACrEL,YAAAA,IAAI,CAACK,UAAL,GAAkBA,UAAlB;AACAL,YAAAA,IAAI,CAACH,SAAL,CAAec,OAAf;AACH,WAHD;AAIA,eAAKhB,WAAL,GAAmBA,WAAnB;AACA,eAAKI,KAAL,CAAWa,SAAX,GAAuB,KAAKb,KAAL,CAAWa,SAAlC;AACH;;;;8CAEmB;AAChB,iBAAKf,SAAL,CAAec,OAAf;AACH","sourcesContent":["class BosunIncidentListPanelEditorCtrl {\n    constructor($scope, $rootScope, $q, uiSegmentSrv, datasourceSrv, templateSrv) {\n        $scope.editor = this;\n        this.panelCtrl = $scope.ctrl;\n        this.panel = this.panelCtrl.panel;\n        this.$q = $q;\n        var self = this;\n        this.datasourceSrv = datasourceSrv;\n        var datasources = _.filter(this.datasourceSrv.getMetricSources(), datasource => {\n            return datasource.meta.id === 'bosun-datasource';\n        });\n        this.datasources = _.map(datasources, 'name');\n        if (!this.panel.datasource) {\n            this.panel.datasource = this.datasources[0];\n        }\n        this.datasourceSrv.get(this.panel.datasource).then(function (datasource) {\n            self.datasource = datasource;\n            self.panelCtrl.refresh();\n        });\n        this.templateSrv = templateSrv;\n        this.panel.showMutli = this.panel.showMutli;\n    }\n\n    datasourceChanged() {\n        this.panelCtrl.refresh();\n    }\n}\n\nexport function bosunIncidentListPanelEditor() {\n    return {\n        restrict: 'E',\n        scope: true,\n        templateUrl: 'public/plugins/bosun-app/panels/incident-list/editor.html',\n        controller: BosunIncidentListPanelEditorCtrl,\n    };\n}"],"file":"editor.js"}